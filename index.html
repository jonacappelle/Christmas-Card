<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

        <title>Dramco Christmas Room</title>

        <style>
            html, body {
                overflow: hidden;
                width: 100%;
                height: 100%;
                margin: 0;
                padding: 0;
            }

            #renderCanvas {
                width: 100%;
                height: 100%;
                touch-action: none;
            }
        </style>

        <script src="https://preview.babylonjs.com/babylon.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.6.2/dat.gui.min.js"></script>
        <script src="https://preview.babylonjs.com/loaders/babylonjs.loaders.min.js"></script>
        <script src="https://code.jquery.com/pep/0.4.3/pep.js"></script>
        <script src="https://preview.babylonjs.com/ammo.js"></script>
        <script src="https://preview.babylonjs.com/cannon.js"></script>
        <script src="https://preview.babylonjs.com/Oimo.js"></script>
        <script src="https://preview.babylonjs.com/earcut.min.js"></script>
        <script src="https://preview.babylonjs.com/babylon.js"></script>
        <script src="https://preview.babylonjs.com/materialsLibrary/babylonjs.materials.min.js"></script>
        <script src="https://preview.babylonjs.com/proceduralTexturesLibrary/babylonjs.proceduralTextures.min.js"></script>
        <script src="https://preview.babylonjs.com/postProcessesLibrary/babylonjs.postProcess.min.js"></script>
        <script src="https://preview.babylonjs.com/loaders/babylonjs.loaders.js"></script>
        <script src="https://preview.babylonjs.com/serializers/babylonjs.serializers.min.js"></script>
        <script src="https://preview.babylonjs.com/gui/babylon.gui.min.js"></script>
        <script src="https://preview.babylonjs.com/inspector/babylon.inspector.bundle.js"></script>
    </head>

   <body>

    <canvas id="renderCanvas" touch-action="none"></canvas> <!-- touch-action="none" for best results from PEP -->

    <script>
        var canvas = document.getElementById("renderCanvas"); // Get the canvas element
        var engine = new BABYLON.Engine(canvas, true, { preserveDrawingBuffer: true, stencil: true }); // Generate the BABYLON 3D engine

        /******* Add the create scene function ******/
        var createScene = function () {

            // Create the scene space
            var scene = new BABYLON.Scene(engine);
            scene.clearColor = new BABYLON.Color3(0.3, 0, 0);

            var camera = new BABYLON.ArcRotateCamera("Camera", Math.PI / 2, Math.PI / 2, 2, new BABYLON.Vector3(0,0,40), scene);

            // WITH VR GLASSES
            // var camera = new BABYLON.VRDeviceOrientationArcRotateCamera ("Camera", Math.PI/2, Math.PI/4, 25, new BABYLON.Vector3 (0, 0, 0), scene);

            // Parameters : name, position, scene
            // var camera = new BABYLON.UniversalCamera("UniversalCamera", new BABYLON.Vector3(0, 0, -80), scene);
            // Targets the camera to a particular position. In this case the scene origin
            // camera.setTarget(BABYLON.Vector3.Zero());

            // Attach the camera to the canvas
            camera.attachControl(canvas, true);


            // Add lights to the scene
            var light1 = new BABYLON.HemisphericLight("light1", new BABYLON.Vector3(1, 1, 0), scene);
            var light2 = new BABYLON.PointLight("light2", new BABYLON.Vector3(0, 1, -1), scene);

            // Add the spheres
			var redMat = new BABYLON.StandardMaterial("redMat", scene);
			redMat.emissiveColor = new BABYLON.Color3(1, 0, 0);
	
			var greenMat = new BABYLON.StandardMaterial("greenMat", scene);
			greenMat.emissiveColor = new BABYLON.Color3(0, 1, 0);
	
			var blueMat = new BABYLON.StandardMaterial("blueMat", scene);
			blueMat.emissiveColor = new BABYLON.Color3(0, 0, 1);
	
			var blue2Mat = new BABYLON.StandardMaterial("whiteMat", scene);
			blue2Mat.emissiveColor = new BABYLON.Color3(0, 0.4, 0.5);

            var redSphere = BABYLON.MeshBuilder.CreateSphere("sphere", {diameter: 2}, scene);
	 		redSphere.material = redMat;

			var greenSphere = BABYLON.MeshBuilder.CreateSphere("sphere", {diameter: 2}, scene);
			greenSphere.material = greenMat;
	
			var blueSphere = BABYLON.MeshBuilder.CreateSphere("sphere", {diameter: 2}, scene);
			blueSphere.material = blueMat;
	
			var blue2MatSphere = BABYLON.MeshBuilder.CreateSphere("sphere", {diameter: 2}, scene);
			blue2MatSphere.material = blue2Mat;

            // Move the spheres
            redSphere.position.x = -3;
            redSphere.position.y = 25;
            greenSphere.position.x = -5;
            greenSphere.position.y = 19;
            blueSphere.position.x = 10;
            blueSphere.position.y = 25;
            blue2MatSphere.position.x = 5;
            blue2MatSphere.position.y = 26;

            // Add the 360 image
            photoDome = new BABYLON.PhotoDome("testdome", "./Images/BackGround.jpg", { resolution: 128, size: 1000 }, scene);

            
            // ./Images/Dramco_logo as location DOESN'T work for some reason

            var pic_KULEUVEN_logo = new BABYLON.StandardMaterial("photo", scene);

            pic_KULEUVEN_logo.diffuseTexture = new BABYLON.Texture("./Images/KULEUVEN_logo.png", scene);

            var options_KULEUVEN_logo = {
                width: 15,
                height: 6,
                depth: 1,
            };
        
            var box_kuleuven = BABYLON.MeshBuilder.CreateBox('box1', options_KULEUVEN_logo, scene);
            box_kuleuven.material = pic_KULEUVEN_logo;
            box_kuleuven.position.x = 5
            box_kuleuven.rotation.y = Math.PI

            var pic_DRAMCO_logo = new BABYLON.StandardMaterial("photo", scene);

            pic_DRAMCO_logo.diffuseTexture = new BABYLON.Texture("./Images/Dramco_logo.jpg", scene);

            var options_DRAMCO_logo = {
                width: 9,
                height: 9,
                depth: 1,
            };
        
            var box_DRAMCO = BABYLON.MeshBuilder.CreateBox('box2', options_DRAMCO_logo, scene);
            box_DRAMCO.material = pic_DRAMCO_logo;
            box_DRAMCO.position.x = 5
            box_DRAMCO.position.y = 10
            box_DRAMCO.rotation.y = Math.PI

            var pic_WC_logo = new BABYLON.StandardMaterial("photo", scene);

            pic_WC_logo.diffuseTexture = new BABYLON.Texture("./Images/WC_logo.png", scene);

            var options_WC_logo = {
                width: 15,
                height: 6,
                depth: 1,
            };
        
            var box_WC = BABYLON.MeshBuilder.CreateBox('box3', options_WC_logo, scene);
            box_WC.material = pic_WC_logo;
            box_WC.position.x = 5;
            box_WC.position.y = -10;
            box_WC.rotation.y = Math.PI;


			//Creation of a repeated textured material
			var kerstboom = new BABYLON.StandardMaterial("kerstboom", scene);
			kerstboom.diffuseTexture = new BABYLON.Texture("./Images/tree.png", scene);
			//kertboom.specularColor = new BABYLON.Color3(0, 0, 0);
			kerstboom.backFaceCulling = false; //Allways show the front and the back of an element
			kerstboom.diffuseTexture.hasAlpha = true;
			kerstboom.backFaceCulling = false;

			
			//Creation of a plane
			var tree_plane = BABYLON.MeshBuilder.CreatePlane("plane", {width: 75, height: 124}, scene);
			tree_plane.material = kerstboom;
			tree_plane.position.x = 50;
			tree_plane.rotation.y = -Math.PI/10

			// GUI for merry christmass button
		    var plane_text = BABYLON.MeshBuilder.CreatePlane("plane2", {width: 7, height: 3}, scene);
		    plane_text.position.y = 20;
		    plane_text.position.x = 5;
		    plane_text.rotation.y = Math.PI;

		    var advancedTexture = BABYLON.GUI.AdvancedDynamicTexture.CreateForMesh(plane_text);

		    var music = new BABYLON.Sound("Music", "./Songs/song.wav", scene, null, {
  				loop: true,
  				autoplay: true
			});

		    var button1 = BABYLON.GUI.Button.CreateSimpleButton("but1", "Press me !");
		    button1.width = 7;
		    button1.height = 3;
		    button1.color = "white";
		    button1.fontSize = 200;
		    button1.background = "red";
		    button1.onPointerUpObservable.add(function() {
		        alert("Merry Christmas!");
		    });
		    advancedTexture.addControl(button1);


            return scene;
        };
        /******* End of the create scene function ******/

        var scene = createScene(); //Call the createScene function

        // Register a render loop to repeatedly render the scene
        engine.runRenderLoop(function () {
                scene.render();
        });

        // Watch for browser/canvas resize events
        window.addEventListener("resize", function () {
                engine.resize();
        });
    </script>

   </body>

</html>
